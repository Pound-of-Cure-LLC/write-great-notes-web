{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg bg-card text-card-foreground shadow-lg\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all hover:border-primary/50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,kHAAE,EACX,uYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/lib/use-user-profile.ts"],"sourcesContent":["/**\r\n * User Profile SWR Hook\r\n *\r\n * Simplified hook that returns raw SWR response.\r\n * Features: auto-caching, deduplication, auto-revalidation.\r\n */\r\n\r\nimport useSWR from 'swr';\r\nimport { apiGet } from './api-client';\r\n\r\nexport interface UserProfile {\r\n  uid: string;\r\n  email: string;\r\n  first_name: string | null;\r\n  last_name: string | null;\r\n  phone: string | null;\r\n  npi: string | null;\r\n  degree: string | null;\r\n  user_note_instructions: string | null;\r\n  emr_settings: {\r\n    charm_post_generation_action?: string;\r\n  };\r\n  roles: string[];\r\n  allowed_visit_types: string[];\r\n  default_visit_type: string | null;\r\n  organization_id: string | null;\r\n  has_pending_invitation: boolean;\r\n}\r\n\r\nconst fetcher = async (url: string): Promise<UserProfile> => {\r\n  return apiGet<UserProfile>(url);\r\n};\r\n\r\n/**\r\n * Fetch and cache user profile\r\n *\r\n * @param skip - Skip fetching (for login/signup pages)\r\n * @returns Standard SWR response: { data, error, isLoading, mutate }\r\n */\r\nexport function useUserProfile(skip = false) {\r\n  return useSWR<UserProfile>(\r\n    skip ? null : '/users/me',\r\n    fetcher,\r\n    {\r\n      // Always fetch on mount to ensure we have fresh data after login\r\n      revalidateOnMount: true,\r\n      dedupingInterval: 60000,\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Check if user has a specific role\r\n */\r\nexport function useHasRole(role: string): boolean {\r\n  const { data } = useUserProfile();\r\n  return data?.roles.includes(role) ?? false;\r\n}\r\n\r\n/**\r\n * Check if user is a provider\r\n */\r\nexport function useIsProvider(): boolean {\r\n  return useHasRole('provider');\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;AAED;AACA;;;AAqBA,MAAM,UAAU,OAAO;IACrB,OAAO,IAAA,8HAAM,EAAc;AAC7B;AAQO,SAAS,eAAe,OAAO,KAAK;IACzC,OAAO,IAAA,yKAAM,EACX,OAAO,OAAO,aACd,SACA;QACE,iEAAiE;QACjE,mBAAmB;QACnB,kBAAkB;IACpB;AAEJ;AAKO,SAAS,WAAW,IAAY;IACrC,MAAM,EAAE,IAAI,EAAE,GAAG;IACjB,OAAO,MAAM,MAAM,SAAS,SAAS;AACvC;AAKO,SAAS;IACd,OAAO,WAAW;AACpB","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/hooks/useAuthRedirect.ts"],"sourcesContent":["/**\r\n * Hook to determine where an authenticated user should be redirected\r\n *\r\n * Implements the following logic:\r\n * 1. If user has pending invitation → /accept-invite\r\n * 2. If user has no organization_id → /onboarding/setup\r\n * 3. If user has organization_id → provided redirect param or /appointments\r\n *\r\n * Uses SWR hook with localStorage cache for instant redirects.\r\n */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useUserProfile } from '@/lib/use-user-profile'\r\n\r\nimport { logger } from \"@/lib/logger\";\r\nconst CACHE_KEY = 'auth_redirect_checked'\r\nconst CACHE_DURATION_MS = 5 * 60 * 1000 // 5 minutes\r\n\r\ninterface UseAuthRedirectOptions {\r\n  fallbackPath?: string // Where to go if user has org (default: /appointments)\r\n  skip?: boolean // Skip the redirect check entirely\r\n}\r\n\r\ninterface UseAuthRedirectResult {\r\n  redirectPath: string | null\r\n  isChecking: boolean\r\n  error: string | null\r\n}\r\n\r\n/**\r\n * Determine where to redirect an authenticated user based on their profile status\r\n *\r\n * @param options Configuration options\r\n * @returns Redirect path, loading state, and error state\r\n *\r\n * @example\r\n * ```tsx\r\n * // In login form after successful auth\r\n * const { redirectPath, isChecking } = useAuthRedirect({\r\n *   fallbackPath: searchParams.get('redirect') || '/appointments'\r\n * })\r\n *\r\n * useEffect(() => {\r\n *   if (redirectPath && !isChecking) {\r\n *     router.push(redirectPath)\r\n *   }\r\n * }, [redirectPath, isChecking])\r\n * ```\r\n */\r\nexport function useAuthRedirect(options: UseAuthRedirectOptions = {}): UseAuthRedirectResult {\r\n  const { fallbackPath = '/appointments', skip = false } = options\r\n  const [redirectPath, setRedirectPath] = useState<string | null>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // Use SWR hook for user profile (instant render from cache)\r\n  // Pass skip to prevent fetching on login/signup pages\r\n  const { data: profile, isLoading, error: profileError } = useUserProfile(skip)\r\n  const isChecking = skip ? false : isLoading\r\n\r\n  useEffect(() => {\r\n    if (skip || isLoading || !profile) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      // Check sessionStorage cache first for 5-minute caching\r\n      const cached = sessionStorage.getItem(CACHE_KEY)\r\n      if (cached) {\r\n        const { timestamp, result } = JSON.parse(cached)\r\n        const age = Date.now() - timestamp\r\n\r\n        // Use cached result if less than 5 minutes old\r\n        if (age < CACHE_DURATION_MS) {\r\n          logger.debug('useAuthRedirect: Using cached redirect decision')\r\n          setRedirectPath(result)\r\n          return\r\n        }\r\n      }\r\n\r\n      logger.debug('useAuthRedirect: Determining redirect from SWR profile')\r\n      let path: string\r\n\r\n      // Priority 1: Pending invitation\r\n      if (profile.has_pending_invitation) {\r\n        logger.debug('useAuthRedirect: User has pending invitation → /accept-invite')\r\n        path = '/accept-invite'\r\n      }\r\n      // Priority 2: No organization (needs onboarding)\r\n      else if (!profile.organization_id) {\r\n        logger.debug('useAuthRedirect: User has no organization → /onboarding/setup')\r\n        path = '/onboarding/setup'\r\n      }\r\n      // Priority 3: Has organization (go to intended destination)\r\n      else {\r\n        logger.debug(`useAuthRedirect: User has organization → ${fallbackPath}`)\r\n        path = fallbackPath\r\n      }\r\n\r\n      // Cache the result in sessionStorage\r\n      sessionStorage.setItem(CACHE_KEY, JSON.stringify({\r\n        timestamp: Date.now(),\r\n        result: path\r\n      }))\r\n\r\n      setRedirectPath(path)\r\n    } catch (err: any) {\r\n      logger.error('useAuthRedirect: Error determining redirect:', err)\r\n      setError(err.message || 'Failed to determine redirect')\r\n      // On error, default to fallback path\r\n      setRedirectPath(fallbackPath)\r\n    }\r\n  }, [skip, isLoading, profile, fallbackPath])\r\n\r\n  // Handle profile fetch errors\r\n  useEffect(() => {\r\n    if (profileError) {\r\n      logger.error('useAuthRedirect: Profile fetch error:', profileError)\r\n      setError(profileError)\r\n\r\n      // Prevent redirect loops - never redirect to auth pages\r\n      const safeRedirect = ['/login', '/signup'].includes(fallbackPath)\r\n        ? '/appointments'\r\n        : fallbackPath\r\n\r\n      setRedirectPath(safeRedirect)\r\n    }\r\n  }, [profileError, fallbackPath])\r\n\r\n  return { redirectPath, isChecking, error }\r\n}\r\n\r\n/**\r\n * Clear the cached redirect decision\r\n * Call this after:\r\n * - User accepts an invitation\r\n * - User completes onboarding\r\n * - User's organization status changes\r\n */\r\nexport function clearAuthRedirectCache() {\r\n  sessionStorage.removeItem(CACHE_KEY)\r\n  logger.debug('useAuthRedirect: Cache cleared')\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;;;AAED;AACA;AAEA;;;;AACA,MAAM,YAAY;AAClB,MAAM,oBAAoB,IAAI,KAAK,KAAK,YAAY;;AAiC7C,SAAS,gBAAgB,UAAkC,CAAC,CAAC;IAClE,MAAM,EAAE,eAAe,eAAe,EAAE,OAAO,KAAK,EAAE,GAAG;IACzD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,4DAA4D;IAC5D,sDAAsD;IACtD,MAAM,EAAE,MAAM,OAAO,EAAE,SAAS,EAAE,OAAO,YAAY,EAAE,GAAG,IAAA,+IAAc,EAAC;IACzE,MAAM,aAAa,OAAO,QAAQ;IAElC,IAAA,kNAAS,EAAC;QACR,IAAI,QAAQ,aAAa,CAAC,SAAS;YACjC;QACF;QAEA,IAAI;YACF,wDAAwD;YACxD,MAAM,SAAS,eAAe,OAAO,CAAC;YACtC,IAAI,QAAQ;gBACV,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,KAAK,KAAK,CAAC;gBACzC,MAAM,MAAM,KAAK,GAAG,KAAK;gBAEzB,+CAA+C;gBAC/C,IAAI,MAAM,mBAAmB;oBAC3B,uHAAM,CAAC,KAAK,CAAC;oBACb,gBAAgB;oBAChB;gBACF;YACF;YAEA,uHAAM,CAAC,KAAK,CAAC;YACb,IAAI;YAEJ,iCAAiC;YACjC,IAAI,QAAQ,sBAAsB,EAAE;gBAClC,uHAAM,CAAC,KAAK,CAAC;gBACb,OAAO;YACT,OAEK,IAAI,CAAC,QAAQ,eAAe,EAAE;gBACjC,uHAAM,CAAC,KAAK,CAAC;gBACb,OAAO;YACT,OAEK;gBACH,uHAAM,CAAC,KAAK,CAAC,CAAC,yCAAyC,EAAE,cAAc;gBACvE,OAAO;YACT;YAEA,qCAAqC;YACrC,eAAe,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC;gBAC/C,WAAW,KAAK,GAAG;gBACnB,QAAQ;YACV;YAEA,gBAAgB;QAClB,EAAE,OAAO,KAAU;YACjB,uHAAM,CAAC,KAAK,CAAC,gDAAgD;YAC7D,SAAS,IAAI,OAAO,IAAI;YACxB,qCAAqC;YACrC,gBAAgB;QAClB;IACF,GAAG;QAAC;QAAM;QAAW;QAAS;KAAa;IAE3C,8BAA8B;IAC9B,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc;YAChB,uHAAM,CAAC,KAAK,CAAC,yCAAyC;YACtD,SAAS;YAET,wDAAwD;YACxD,MAAM,eAAe;gBAAC;gBAAU;aAAU,CAAC,QAAQ,CAAC,gBAChD,kBACA;YAEJ,gBAAgB;QAClB;IACF,GAAG;QAAC;QAAc;KAAa;IAE/B,OAAO;QAAE;QAAc;QAAY;IAAM;AAC3C;AASO,SAAS;IACd,eAAe,UAAU,CAAC;IAC1B,uHAAM,CAAC,KAAK,CAAC;AACf","debugId":null}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/login-form.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport Link from \"next/link\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useAuthRedirect } from \"@/hooks/useAuthRedirect\";\r\n\r\nimport { logger } from \"@/lib/logger\";\r\nexport function LoginForm({\r\n  className,\r\n  ...props\r\n}: React.ComponentPropsWithoutRef<\"div\">) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [justLoggedIn, setJustLoggedIn] = useState(false);\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  // Get redirect parameter from URL (e.g., /login?redirect=/settings/profile)\r\n  // Prevent redirect loops by rejecting /login and /signup as redirect targets\r\n  const rawRedirect = searchParams.get('redirect');\r\n  const redirectParam = (rawRedirect && rawRedirect !== '/login' && rawRedirect !== '/signup')\r\n    ? rawRedirect\r\n    : '/appointments';\r\n\r\n  // Check for auth error from sessionStorage (set by api-client on 401)\r\n  useEffect(() => {\r\n    const authError = sessionStorage.getItem('auth_error');\r\n    if (authError) {\r\n      setError(authError);\r\n      sessionStorage.removeItem('auth_error'); // Clear it after reading\r\n    }\r\n  }, []);\r\n\r\n  // Use auth redirect hook - only runs after successful login\r\n  const { redirectPath, isChecking, error: redirectError } = useAuthRedirect({\r\n    fallbackPath: redirectParam,\r\n    skip: !justLoggedIn, // Only check redirect after login\r\n  });\r\n\r\n  // Redirect when path is determined (success) or error occurs\r\n  useEffect(() => {\r\n    if (!justLoggedIn || isChecking) return;\r\n\r\n    // Success case: redirect path determined\r\n    if (redirectPath) {\r\n      logger.debug('LoginForm: Redirecting to', redirectPath);\r\n      router.push(redirectPath);\r\n      return;\r\n    }\r\n\r\n    // Error case: profile fetch failed, use fallback\r\n    if (redirectError) {\r\n      logger.error('LoginForm: Profile fetch failed, using fallback redirect:', {\r\n        error: redirectError,\r\n        fallback: redirectParam\r\n      });\r\n      setError('Failed to load user profile. Redirecting to dashboard...');\r\n      // Show error briefly before redirecting\r\n      setTimeout(() => {\r\n        router.push(redirectParam);\r\n      }, 1000);\r\n    }\r\n  }, [justLoggedIn, redirectPath, isChecking, redirectError, redirectParam, router]);\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const supabase = createClient();\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const { error } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n      });\r\n      if (error) throw error;\r\n\r\n      // Trigger redirect logic\r\n      // Keep loading state active until redirect completes\r\n      setJustLoggedIn(true);\r\n    } catch (error: unknown) {\r\n      setError(error instanceof Error ? error.message : \"An error occurred\");\r\n      setIsLoading(false); // Only turn off loading on error\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\"flex flex-col gap-6\", className)} {...props}>\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"text-2xl\">Login</CardTitle>\r\n          <CardDescription>\r\n            Enter your email below to login to your account\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <form onSubmit={handleLogin}>\r\n            <div className=\"flex flex-col gap-6\">\r\n              <div className=\"grid gap-2\">\r\n                <Label htmlFor=\"email\">Email</Label>\r\n                <Input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  placeholder=\"m@example.com\"\r\n                  required\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  data-testid=\"email-input\"\r\n                />\r\n              </div>\r\n              <div className=\"grid gap-2\">\r\n                <div className=\"flex items-center\">\r\n                  <Label htmlFor=\"password\">Password</Label>\r\n                  <Link\r\n                    href=\"/forgot-password\"\r\n                    className=\"ml-auto inline-block text-sm underline-offset-4 hover:underline\"\r\n                  >\r\n                    Forgot your password?\r\n                  </Link>\r\n                </div>\r\n                <Input\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  required\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  data-testid=\"password-input\"\r\n                />\r\n              </div>\r\n              {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n              <Button\r\n                type=\"submit\"\r\n                className=\"w-full\"\r\n                isLoading={isLoading}\r\n                loadingText=\"Logging in\"\r\n                data-testid=\"login-submit\"\r\n              >\r\n                Login\r\n              </Button>\r\n              <div className=\"text-center text-sm\">\r\n                Don&apos;t have an account?{\" \"}\r\n                <Link\r\n                  href=\"/signup\"\r\n                  className=\"underline underline-offset-4\"\r\n                >\r\n                  Sign up\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}