{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/theme-provider.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\"\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof NextThemesProvider>) {\r\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKO,SAAS,cAAc,EAC5B,QAAQ,EACR,GAAG,OAC6C;IAChD,qBAAO,8OAAC,iKAAkB;QAAE,GAAG,KAAK;kBAAG;;;;;;AACzC","debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/lib/logger.ts"],"sourcesContent":["/**\r\n * Lightweight logger utility for frontend logging.\r\n *\r\n * Automatically filters debug/info logs in production while keeping\r\n * warnings and errors visible for debugging production issues.\r\n *\r\n * Usage:\r\n * ```typescript\r\n * import { logger } from '@/lib/logger';\r\n *\r\n * logger.debug('Detailed debugging info', { data });\r\n * logger.info('General information');\r\n * logger.warn('Warning message');\r\n * logger.error('Error occurred', error);\r\n * ```\r\n */\r\n\r\nconst isDevelopment = process.env.NODE_ENV === 'development';\r\n\r\nexport const logger = {\r\n  /**\r\n   * Debug-level logging (only in development).\r\n   * Use for detailed debugging information that's not needed in production.\r\n   */\r\n  debug: (...args: unknown[]): void => {\r\n    if (isDevelopment) {\r\n      console.debug('[DEBUG]', ...args);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Info-level logging (only in development).\r\n   * Use for general informational messages about application state.\r\n   */\r\n  info: (...args: unknown[]): void => {\r\n    if (isDevelopment) {\r\n      console.info('[INFO]', ...args);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Warning-level logging (always shown).\r\n   * Use for potentially problematic situations that should be investigated.\r\n   */\r\n  warn: (...args: unknown[]): void => {\r\n    console.warn('[WARN]', ...args);\r\n  },\r\n\r\n  /**\r\n   * Error-level logging (always shown).\r\n   * Use for error conditions that need immediate attention.\r\n   */\r\n  error: (...args: unknown[]): void => {\r\n    console.error('[ERROR]', ...args);\r\n  },\r\n};\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;CAeC;;;;AAED,MAAM,gBAAgB,oDAAyB;AAExC,MAAM,SAAS;IACpB;;;GAGC,GACD,OAAO,CAAC,GAAG;QACT,wCAAmB;YACjB,QAAQ,KAAK,CAAC,cAAc;QAC9B;IACF;IAEA;;;GAGC,GACD,MAAM,CAAC,GAAG;QACR,wCAAmB;YACjB,QAAQ,IAAI,CAAC,aAAa;QAC5B;IACF;IAEA;;;GAGC,GACD,MAAM,CAAC,GAAG;QACR,QAAQ,IAAI,CAAC,aAAa;IAC5B;IAEA;;;GAGC,GACD,OAAO,CAAC,GAAG;QACT,QAAQ,KAAK,CAAC,cAAc;IAC9B;AACF","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/lib/swr-config.ts"],"sourcesContent":["/**\r\n * Global SWR Configuration with localStorage persistence\r\n *\r\n * Features:\r\n * - localStorage persistence across sessions\r\n * - Cache versioning to handle schema changes\r\n * - Auto-revalidation on focus/reconnect\r\n * - Request deduplication\r\n * - Error recovery\r\n */\r\n\r\nimport { SWRConfiguration } from 'swr';\r\n\r\nimport { logger } from \"@/lib/logger\";\r\nconst CACHE_VERSION = 1;\r\n\r\ninterface CacheEntry<T> {\r\n  data: T;\r\n  timestamp: number;\r\n  version: number;\r\n}\r\n\r\n/**\r\n * LocalStorage provider for SWR\r\n * Handles persistence, versioning, and error recovery\r\n */\r\nfunction localStorageProvider() {\r\n  // Load cache from localStorage and restore as SWR-compatible format\r\n  let initialCache: Array<[string, any]> = [];\r\n\r\n  if (typeof window !== 'undefined') {\r\n    try {\r\n      const stored = localStorage.getItem('swr-cache');\r\n      if (stored) {\r\n        const parsed = JSON.parse(stored) as Array<[string, { data: any; timestamp: number }]>;\r\n        // Convert stored format back to SWR format\r\n        initialCache = parsed.map(([key, value]) => [key, value]);\r\n        logger.debug('[SWR] Restored cache from localStorage:', initialCache.length, 'entries');\r\n      }\r\n    } catch (error) {\r\n      logger.error('[SWR] Failed to restore cache:', error);\r\n    }\r\n  }\r\n\r\n  const map = new Map<string, any>(initialCache);\r\n\r\n  // Validate cache version on load\r\n  if (typeof window !== 'undefined') {\r\n    const storedVersion = localStorage.getItem('swr-cache-version');\r\n    if (storedVersion !== String(CACHE_VERSION)) {\r\n      logger.info('SWR cache version mismatch, clearing cache');\r\n      localStorage.removeItem('swr-cache');\r\n      localStorage.setItem('swr-cache-version', String(CACHE_VERSION));\r\n      map.clear();\r\n    }\r\n\r\n    // Clean up orphaned cache keys from old implementation\r\n    Object.keys(localStorage).forEach(key => {\r\n      if (key.startsWith('appointments:') || key === 'lastScheduleDate') {\r\n        logger.info('Removing orphaned cache key:', key);\r\n        localStorage.removeItem(key);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Persist to localStorage with multiple triggers\r\n  if (typeof window !== 'undefined') {\r\n    let persistTimeout: NodeJS.Timeout | null = null;\r\n\r\n    const persistCache = () => {\r\n      try {\r\n        // Extract only serializable data from SWR cache entries\r\n        const appCache = Array.from(map.entries())\r\n          .filter(([key, value]) => {\r\n            // Only persist keys that have actual data\r\n            return value && typeof value.data !== 'undefined' && value.data !== null;\r\n          })\r\n          .map(([key, value]) => {\r\n            // Store only the data, not the entire SWR state object\r\n            return [key, {\r\n              data: value.data,\r\n              timestamp: Date.now(),\r\n            }];\r\n          });\r\n\r\n        localStorage.setItem('swr-cache', JSON.stringify(appCache));\r\n        logger.debug('[SWR] Cache persisted:', appCache.length, 'entries');\r\n      } catch (error) {\r\n        logger.error('[SWR] Failed to persist cache:', error);\r\n      }\r\n    };\r\n\r\n    // Debounced persistence function\r\n    const debouncedPersist = () => {\r\n      if (persistTimeout) clearTimeout(persistTimeout);\r\n      persistTimeout = setTimeout(persistCache, 1000); // Wait 1s after last change\r\n    };\r\n\r\n    // Wrap Map methods to trigger persistence\r\n    const originalSet = map.set.bind(map);\r\n    const originalDelete = map.delete.bind(map);\r\n    const originalClear = map.clear.bind(map);\r\n\r\n    map.set = (key, value) => {\r\n      const result = originalSet(key, value);\r\n      logger.debug('[SWR] Cache set:', key.substring(0, 80), 'has data:', !!value?.data);\r\n      debouncedPersist();\r\n      return result;\r\n    };\r\n\r\n    map.delete = (key) => {\r\n      const result = originalDelete(key);\r\n      debouncedPersist();\r\n      return result;\r\n    };\r\n\r\n    map.clear = () => {\r\n      originalClear();\r\n      persistCache(); // Immediate persist on clear\r\n    };\r\n\r\n    // Persist on page visibility change (when user switches tabs)\r\n    document.addEventListener('visibilitychange', () => {\r\n      if (document.hidden) {\r\n        persistCache();\r\n      }\r\n    });\r\n\r\n    // Persist on beforeunload (tab close) as backup\r\n    window.addEventListener('beforeunload', persistCache);\r\n\r\n    // Persist periodically in case other triggers fail\r\n    setInterval(persistCache, 30000); // Every 30 seconds\r\n  }\r\n\r\n  return map;\r\n}\r\n\r\n/**\r\n * Global SWR configuration\r\n */\r\nexport const swrConfig: SWRConfiguration = {\r\n  provider: localStorageProvider,\r\n\r\n  // Auto-revalidation settings\r\n  revalidateOnFocus: true,          // Refresh when tab gains focus\r\n  revalidateOnReconnect: true,      // Refresh when network reconnects\r\n  dedupingInterval: 2000,           // Dedupe requests within 2s\r\n\r\n  // Error handling\r\n  shouldRetryOnError: true,         // Retry on error\r\n  errorRetryCount: 3,               // Max 3 retries\r\n  errorRetryInterval: 5000,         // 5s between retries\r\n\r\n  // Cache settings\r\n  revalidateIfStale: true,          // Revalidate stale data\r\n  focusThrottleInterval: 5000,      // Throttle focus revalidation to 5s\r\n};\r\n\r\n/**\r\n * Clear all SWR cache\r\n * Call this on logout to prevent data leaks\r\n */\r\nexport function clearSWRCache() {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.removeItem('swr-cache');\r\n    localStorage.setItem('swr-cache-version', String(CACHE_VERSION));\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;;;AAID;;AACA,MAAM,gBAAgB;AAQtB;;;CAGC,GACD,SAAS;IACP,oEAAoE;IACpE,IAAI,eAAqC,EAAE;IAE3C;;IAcA,MAAM,MAAM,IAAI,IAAiB;IAEjC,iCAAiC;IACjC;;IAkBA,iDAAiD;IACjD;;IAqEA,OAAO;AACT;AAKO,MAAM,YAA8B;IACzC,UAAU;IAEV,6BAA6B;IAC7B,mBAAmB;IACnB,uBAAuB;IACvB,kBAAkB;IAElB,iBAAiB;IACjB,oBAAoB;IACpB,iBAAiB;IACjB,oBAAoB;IAEpB,iBAAiB;IACjB,mBAAmB;IACnB,uBAAuB;AACzB;AAMO,SAAS;IACd;;AAIF","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\n// Environment variable check for middleware\r\nexport const hasEnvVars =\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL &&\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\nexport function humanizeSectionName(value: string): string {\r\n  if (!value) {\r\n    return \"\"\r\n  }\r\n\r\n  const words = value\r\n    .replace(/[_-]+/g, \" \")\r\n    .trim()\r\n    .split(/\\s+/)\r\n\r\n  return words\r\n    .map((word) => {\r\n      if (!word) {\r\n        return \"\"\r\n      }\r\n\r\n      const lower = word.toLowerCase()\r\n\r\n      // Preserve all-uppercase acronyms (e.g., \"ROS\", \"HPI\")\r\n      if (word === word.toUpperCase()) {\r\n        return word\r\n      }\r\n\r\n      return lower.charAt(0).toUpperCase() + lower.slice(1)\r\n    })\r\n    .join(\" \")\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAGO,MAAM,aACX,QAAQ,GAAG,CAAC,wBAAwB,IACpC,QAAQ,GAAG,CAAC,6BAA6B;AAEpC,SAAS,oBAAoB,KAAa;IAC/C,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,MAAM,QAAQ,MACX,OAAO,CAAC,UAAU,KAClB,IAAI,GACJ,KAAK,CAAC;IAET,OAAO,MACJ,GAAG,CAAC,CAAC;QACJ,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QAEA,MAAM,QAAQ,KAAK,WAAW;QAE9B,uDAAuD;QACvD,IAAI,SAAS,KAAK,WAAW,IAAI;YAC/B,OAAO;QACT;QAEA,OAAO,MAAM,MAAM,CAAC,GAAG,WAAW,KAAK,MAAM,KAAK,CAAC;IACrD,GACC,IAAI,CAAC;AACV","debugId":null}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Cross2Icon } from \"@radix-ui/react-icons\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 hover:bg-accent focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1\">\r\n        <Cross2Icon className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogTrigger,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,8LAAU;gCAAC,WAAU;;;;;;0CACtB,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { Loader2 } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-[hsl(207_86%_70%)] text-white hover:bg-[hsl(207_86%_50%)] hover:shadow-lg active:scale-[0.98] font-semibold\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-[hsl(0_84%_50%)] hover:shadow-lg active:scale-[0.98]\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-[hsl(100_6%_35%)] hover:shadow-md active:scale-[0.98]\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline hover:text-[hsl(207_86%_50%)]\",\r\n        success:\r\n          \"bg-success text-success-foreground hover:bg-[hsl(142_71_35%)] hover:shadow-lg active:scale-[0.98]\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n  isLoading?: boolean\r\n  loadingText?: string\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, isLoading = false, loadingText, children, disabled, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n\r\n    // Determine button content based on loading state\r\n    const buttonContent = isLoading ? (\r\n      <>\r\n        <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n        {loadingText || children}\r\n      </>\r\n    ) : (\r\n      children\r\n    )\r\n\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size }), className)}\r\n        ref={ref}\r\n        disabled={disabled || isLoading}\r\n        {...props}\r\n      >\r\n        {buttonContent}\r\n      </Comp>\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AAEA;;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,oSACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;YACN,SACE;QACJ;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAWF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,YAAY,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IAC5G,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,kDAAkD;IAClD,MAAM,gBAAgB,0BACpB;;0BACE,8OAAC,4NAAO;gBAAC,WAAU;;;;;;YAClB,eAAe;;uBAGlB;IAGF,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;QAAK,IAAI;QACjD,KAAK;QACL,UAAU,YAAY;QACrB,GAAG,KAAK;kBAER;;;;;;AAGP;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\r\n\r\nexport function createClient() {\r\n  // Determine environment from URL to set appropriate cookie name\r\n  const isDevelopment = process.env.NEXT_PUBLIC_SUPABASE_URL?.includes('bqnmswezadsxxfbpugua');\r\n  const cookiePrefix = isDevelopment ? 'dev' : 'prod';\r\n\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookieOptions: {\r\n        name: `${cookiePrefix}-sb`,\r\n      },\r\n    }\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACd,gEAAgE;IAChE,MAAM,gBAAgB,QAAQ,GAAG,CAAC,wBAAwB,EAAE,SAAS;IACrE,MAAM,eAAe,gBAAgB,QAAQ;IAE7C,OAAO,IAAA,iMAAmB,EACxB,QAAQ,GAAG,CAAC,wBAAwB,EACpC,QAAQ,GAAG,CAAC,6BAA6B,EACzC;QACE,eAAe;YACb,MAAM,GAAG,aAAa,GAAG,CAAC;QAC5B;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/lib/api-client.ts"],"sourcesContent":["/**\r\n * API Client with automatic authentication handling\r\n *\r\n * This utility wraps fetch() to automatically include authentication headers\r\n * from the current Supabase session. Use this instead of raw fetch() for all\r\n * backend API calls.\r\n *\r\n * Simplified approach:\r\n * 1. Get session from Supabase\r\n * 2. Use access token\r\n * 3. If 401, redirect to login\r\n * 4. Trust Supabase session management - no manual fallbacks\r\n */\r\n\r\nimport { createClient } from '@/lib/supabase/client'\r\n\r\nimport { logger } from \"@/lib/logger\";\r\n// Use empty string to make requests relative (proxied through Next.js)\r\n// In production, set NEXT_PUBLIC_API_URL to the full backend URL\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || ''\r\n\r\ninterface ApiRequestOptions extends RequestInit {\r\n  requireAuth?: boolean // Default: true\r\n  accessToken?: string // Optional: Use this token instead of fetching from session\r\n  suppressEMRModal?: boolean // Optional: Suppress EMR configuration modal for 503 errors\r\n}\r\n\r\ninterface ApiResponse<T = unknown> {\r\n  data?: T\r\n  error?: string\r\n}\r\n\r\n\r\n/**\r\n * Make an authenticated API request\r\n *\r\n * @param endpoint - API endpoint (e.g., '/users/me')\r\n * @param options - Standard fetch options\r\n * @returns Response from the API\r\n *\r\n * @example\r\n * ```typescript\r\n * // GET request\r\n * const response = await apiClient('/users/me')\r\n *\r\n * // POST request\r\n * const response = await apiClient('/organizations', {\r\n *   method: 'POST',\r\n *   body: JSON.stringify({ name: 'My Clinic' })\r\n * })\r\n * ```\r\n */\r\nexport async function apiClient<T = unknown>(\r\n  endpoint: string,\r\n  options: ApiRequestOptions = {}\r\n): Promise<Response> {\r\n  const supabase = createClient()\r\n\r\n  // Use getClaims() to get the current user's claims\r\n  // This is the recommended approach from Supabase SSR documentation\r\n  const { data } = await supabase.auth.getClaims()\r\n  const claims = data?.claims\r\n\r\n  if (!claims) {\r\n    // No valid session - redirect to login\r\n    if (typeof window !== 'undefined') {\r\n      const currentPath = window.location.pathname\r\n      // Prevent redirect loops - never redirect to /login with redirect=/login\r\n      const shouldIncludeRedirect = currentPath !== '/login' && currentPath !== '/signup'\r\n      const redirectParam = shouldIncludeRedirect ? `?redirect=${encodeURIComponent(currentPath)}` : ''\r\n      window.location.href = `/login${redirectParam}`\r\n    }\r\n    throw new Error('Not authenticated')\r\n  }\r\n\r\n  // Get the access token from the session\r\n  const { data: { session } } = await supabase.auth.getSession()\r\n\r\n  if (!session?.access_token) {\r\n    // Session exists but no access token - shouldn't happen, but handle it\r\n    if (typeof window !== 'undefined') {\r\n      const currentPath = window.location.pathname\r\n      // Prevent redirect loops - never redirect to /login with redirect=/login\r\n      const shouldIncludeRedirect = currentPath !== '/login' && currentPath !== '/signup'\r\n      const redirectParam = shouldIncludeRedirect ? `?redirect=${encodeURIComponent(currentPath)}` : ''\r\n      window.location.href = `/login${redirectParam}`\r\n    }\r\n    throw new Error('No session token')\r\n  }\r\n\r\n  // Build headers\r\n  const headers: Record<string, string> = {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `Bearer ${session.access_token}`,\r\n  }\r\n\r\n  // Add timezone header automatically (browser's timezone)\r\n  if (typeof window !== 'undefined') {\r\n    try {\r\n      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone\r\n      headers['X-Timezone'] = timezone\r\n    } catch (error) {\r\n      logger.warn('API Client: Failed to get timezone:', error)\r\n    }\r\n  }\r\n\r\n  // Add any existing headers\r\n  if (options.headers) {\r\n    Object.entries(options.headers).forEach(([key, value]) => {\r\n      if (typeof value === 'string') {\r\n        headers[key] = value\r\n      }\r\n    })\r\n  }\r\n\r\n  // Make the request\r\n  const url = endpoint.startsWith('http') ? endpoint : `${API_BASE_URL}${endpoint}`\r\n\r\n  const response = await fetch(url, {\r\n    ...options,\r\n    headers,\r\n  })\r\n\r\n  // Handle 401 Unauthorized - clear session and redirect to login\r\n  if (response.status === 401) {\r\n    await supabase.auth.signOut()\r\n\r\n    if (typeof window !== 'undefined') {\r\n      // Store error message for login page to display\r\n      sessionStorage.setItem('auth_error', 'Your session has expired. Please log in again.')\r\n\r\n      const currentPath = window.location.pathname\r\n      // Prevent redirect loops - never redirect to /login with redirect=/login\r\n      const shouldIncludeRedirect = currentPath !== '/login' && currentPath !== '/signup'\r\n      const redirectParam = shouldIncludeRedirect ? `?redirect=${encodeURIComponent(currentPath)}` : ''\r\n      window.location.href = `/login${redirectParam}`\r\n    }\r\n  }\r\n\r\n  // Handle 403 Forbidden - check if it's organization_required\r\n  if (response.status === 403) {\r\n    // Clone response so we can read it without consuming it\r\n    const clonedResponse = response.clone()\r\n\r\n    try {\r\n      const errorData = await clonedResponse.json()\r\n\r\n      // If user is authenticated but missing organization, redirect to onboarding\r\n      if (errorData.error === 'organization_required') {\r\n        if (typeof window !== 'undefined') {\r\n          window.location.href = '/onboarding/setup'\r\n        }\r\n      }\r\n    } catch {\r\n      // If we can't parse the response, just continue\r\n      // The calling code will handle the 403 error\r\n    }\r\n  }\r\n\r\n  // Handle 503 Service Unavailable - check if it's an EMR configuration error\r\n  if (response.status === 503) {\r\n    // Clone response so we can read it without consuming it\r\n    const clonedResponse = response.clone()\r\n\r\n    try {\r\n      const errorData = await clonedResponse.json()\r\n\r\n      // If it's an EMR configuration error, dispatch event to show modal\r\n      // UNLESS this specific request wants to suppress it\r\n      if (errorData.error === 'emr_configuration_error') {\r\n        if (typeof window !== 'undefined' && !options.suppressEMRModal) {\r\n          // Store error details in sessionStorage for modal to retrieve\r\n          sessionStorage.setItem('emr_config_error', JSON.stringify({\r\n            message: errorData.message,\r\n            redirect_url: errorData.redirect_url || '/settings/emr-connections',\r\n            connection_name: errorData.connection_name\r\n          }))\r\n\r\n          // Dispatch custom event for EMRConfigErrorModal to listen to\r\n          window.dispatchEvent(new CustomEvent('emr-configuration-error', {\r\n            detail: {\r\n              message: errorData.message,\r\n              redirect_url: errorData.redirect_url || '/settings/emr-connections',\r\n              connection_name: errorData.connection_name\r\n            }\r\n          }))\r\n        }\r\n      }\r\n    } catch {\r\n      // If we can't parse the response, just continue\r\n      // The calling code will handle the 503 error\r\n    }\r\n  }\r\n\r\n  return response\r\n}\r\n\r\n/**\r\n * Convenience wrapper for GET requests\r\n */\r\nexport async function apiGet<T = unknown>(\r\n  endpoint: string,\r\n  options?: ApiRequestOptions\r\n): Promise<T> {\r\n  const response = await apiClient(endpoint, {\r\n    method: 'GET',\r\n    ...options,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}))\r\n\r\n    // For 503 EMR configuration errors, don't throw - the error is handled by the modal\r\n    // The modal was already triggered in apiClient(), so just return empty data\r\n    if (response.status === 503 && errorData.error === 'emr_configuration_error') {\r\n      return {} as T\r\n    }\r\n\r\n    throw new Error(errorData.detail || `Request failed with status ${response.status}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Convenience wrapper for POST requests\r\n */\r\nexport async function apiPost<T = unknown>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options?: ApiRequestOptions\r\n): Promise<T> {\r\n  const response = await apiClient(endpoint, {\r\n    method: 'POST',\r\n    ...(data ? { body: JSON.stringify(data) } : {}),\r\n    ...options,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}))\r\n\r\n    // For 503 EMR configuration errors, don't throw - handled by modal\r\n    if (response.status === 503 && errorData.error === 'emr_configuration_error') {\r\n      return {} as T\r\n    }\r\n\r\n    // For 409 Conflict (duplicate check), throw with structured detail object\r\n    if (response.status === 409 && typeof errorData.detail === 'object') {\r\n      const error = new Error(errorData.detail.message || 'Duplicate found')\r\n      // Attach the full detail object for caller to access\r\n      ;(error as any).detail = errorData.detail\r\n      throw error\r\n    }\r\n\r\n    throw new Error(errorData.detail || `Request failed with status ${response.status}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Convenience wrapper for PATCH requests\r\n */\r\nexport async function apiPatch<T = unknown>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options?: ApiRequestOptions\r\n): Promise<T> {\r\n  const response = await apiClient(endpoint, {\r\n    method: 'PATCH',\r\n    ...(data ? { body: JSON.stringify(data) } : {}),\r\n    ...options,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}))\r\n\r\n    // For 503 EMR configuration errors, don't throw - handled by modal\r\n    if (response.status === 503 && errorData.error === 'emr_configuration_error') {\r\n      return {} as T\r\n    }\r\n\r\n    throw new Error(errorData.detail || `Request failed with status ${response.status}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Convenience wrapper for PUT requests\r\n */\r\nexport async function apiPut<T = unknown>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options?: ApiRequestOptions\r\n): Promise<T> {\r\n  const response = await apiClient(endpoint, {\r\n    method: 'PUT',\r\n    ...(data ? { body: JSON.stringify(data) } : {}),\r\n    ...options,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}))\r\n\r\n    // For 503 EMR configuration errors, don't throw - handled by modal\r\n    if (response.status === 503 && errorData.error === 'emr_configuration_error') {\r\n      return {} as T\r\n    }\r\n\r\n    throw new Error(errorData.detail || `Request failed with status ${response.status}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Convenience wrapper for DELETE requests\r\n */\r\nexport async function apiDelete<T = unknown>(\r\n  endpoint: string,\r\n  options?: RequestInit\r\n): Promise<T> {\r\n  const response = await apiClient(endpoint, {\r\n    method: 'DELETE',\r\n    ...options,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}))\r\n\r\n    // For 503 EMR configuration errors, don't throw - handled by modal\r\n    if (response.status === 503 && errorData.error === 'emr_configuration_error') {\r\n      return {} as T\r\n    }\r\n\r\n    throw new Error(errorData.detail || `Request failed with status ${response.status}`)\r\n  }\r\n\r\n  // DELETE requests might not return a body\r\n  const text = await response.text()\r\n  return text ? JSON.parse(text) : ({} as T)\r\n}\r\n\r\n/**\r\n * Get telemed URL for an appointment\r\n *\r\n * Fetches the telemed join URL from the backend. Only available for\r\n * EMR adapters that support telemed (e.g., Charm).\r\n *\r\n * @param appointmentId - Appointment ID\r\n * @returns Object with telemed_url property\r\n * @throws Error if telemed not supported or URL not available\r\n *\r\n * @example\r\n * ```typescript\r\n * try {\r\n *   const { telemed_url } = await getTelemedUrl('appointment-id')\r\n *   window.open(telemed_url, '_blank')\r\n * } catch (error) {\r\n *   logger.error('Telemed not available:', error)\r\n * }\r\n * ```\r\n */\r\nexport async function getTelemedUrl(\r\n  appointmentId: string\r\n): Promise<{ telemed_url: string }> {\r\n  return apiGet(`/appointments/${appointmentId}/telemed-url`)\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 690, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/store/capabilitiesStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { apiGet } from '@/lib/api-client';\r\n\r\nexport interface Capabilities {\r\n  adapter_type: string;\r\n  capabilities: string[];\r\n}\r\n\r\ninterface CapabilitiesState {\r\n  capabilities: Capabilities | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  fetchCapabilities: () => Promise<void>;\r\n  clearCapabilities: () => void;\r\n  hasCapability: (capability: string) => boolean;\r\n}\r\n\r\nexport const useCapabilitiesStore = create<CapabilitiesState>((set, get) => ({\r\n  capabilities: null,\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  fetchCapabilities: async () => {\r\n    set({ isLoading: true, error: null });\r\n\r\n    try {\r\n      // Add cache-busting timestamp to force fresh fetch\r\n      const timestamp = new Date().getTime();\r\n      const data = await apiGet<Capabilities>(`/organizations/me/capabilities?_t=${timestamp}`);\r\n      set({ capabilities: data, isLoading: false });\r\n    } catch (error) {\r\n      // Silently fail - this is expected if user not fully authenticated yet\r\n      set({ isLoading: false });\r\n    }\r\n  },\r\n\r\n  clearCapabilities: () => {\r\n    set({\r\n      capabilities: { adapter_type: 'none', capabilities: [] },\r\n      isLoading: false,\r\n      error: 'EMR configuration required'\r\n    });\r\n  },\r\n\r\n  hasCapability: (capability: string) => {\r\n    const { capabilities } = get();\r\n    if (!capabilities) return false;\r\n    return capabilities.capabilities.includes(capability);\r\n  },\r\n}));\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAgBO,MAAM,uBAAuB,IAAA,kJAAM,EAAoB,CAAC,KAAK,MAAQ,CAAC;QAC3E,cAAc;QACd,WAAW;QACX,OAAO;QAEP,mBAAmB;YACjB,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YAEnC,IAAI;gBACF,mDAAmD;gBACnD,MAAM,YAAY,IAAI,OAAO,OAAO;gBACpC,MAAM,OAAO,MAAM,IAAA,8HAAM,EAAe,CAAC,kCAAkC,EAAE,WAAW;gBACxF,IAAI;oBAAE,cAAc;oBAAM,WAAW;gBAAM;YAC7C,EAAE,OAAO,OAAO;gBACd,uEAAuE;gBACvE,IAAI;oBAAE,WAAW;gBAAM;YACzB;QACF;QAEA,mBAAmB;YACjB,IAAI;gBACF,cAAc;oBAAE,cAAc;oBAAQ,cAAc,EAAE;gBAAC;gBACvD,WAAW;gBACX,OAAO;YACT;QACF;QAEA,eAAe,CAAC;YACd,MAAM,EAAE,YAAY,EAAE,GAAG;YACzB,IAAI,CAAC,cAAc,OAAO;YAC1B,OAAO,aAAa,YAAY,CAAC,QAAQ,CAAC;QAC5C;IACF,CAAC","debugId":null}},
    {"offset": {"line": 742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/components/EMRConfigErrorModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { AlertTriangle } from \"lucide-react\";\r\nimport { useCapabilitiesStore } from \"@/store/capabilitiesStore\";\r\n\r\ninterface EMRConfigError {\r\n  message: string;\r\n  redirect_url: string;\r\n  connection_name?: string;\r\n}\r\n\r\n/**\r\n * Global EMR Configuration Error Modal\r\n *\r\n * Listens for 'emr-configuration-error' events from api-client\r\n * and displays a modal with instructions to configure EMR.\r\n *\r\n * Place this component at the root layout level to handle errors globally.\r\n */\r\nexport function EMRConfigErrorModal() {\r\n  const router = useRouter();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [error, setError] = useState<EMRConfigError | null>(null);\r\n  const clearCapabilities = useCapabilitiesStore((state) => state.clearCapabilities);\r\n\r\n  useEffect(() => {\r\n    // Check for stored error on mount (in case page was refreshed)\r\n    const storedError = sessionStorage.getItem('emr_config_error');\r\n    if (storedError) {\r\n      try {\r\n        const errorData = JSON.parse(storedError);\r\n        setError(errorData);\r\n        setIsOpen(true);\r\n        // Clear capabilities to prevent unauthorized API calls\r\n        clearCapabilities();\r\n      } catch {\r\n        // Invalid JSON, ignore\r\n      }\r\n    }\r\n\r\n    // Listen for EMR configuration errors\r\n    const handleEMRError = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const errorData = customEvent.detail;\r\n\r\n      setError({\r\n        message: errorData.message || \"EMR configuration is incomplete\",\r\n        redirect_url: errorData.redirect_url || \"/settings/charm\",\r\n        connection_name: errorData.connection_name\r\n      });\r\n      setIsOpen(true);\r\n\r\n      // Clear capabilities immediately to prevent further unauthorized API calls\r\n      clearCapabilities();\r\n    };\r\n\r\n    window.addEventListener('emr-configuration-error', handleEMRError);\r\n\r\n    return () => {\r\n      window.removeEventListener('emr-configuration-error', handleEMRError);\r\n    };\r\n  }, [clearCapabilities]);\r\n\r\n  const handleGoToSettings = () => {\r\n    // Clear stored error\r\n    sessionStorage.removeItem('emr_config_error');\r\n    setIsOpen(false);\r\n\r\n    // Navigate to EMR settings page\r\n    if (error?.redirect_url) {\r\n      router.push(error.redirect_url);\r\n    }\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    // Clear stored error\r\n    sessionStorage.removeItem('emr_config_error');\r\n    setIsOpen(false);\r\n  };\r\n\r\n  if (!error) return null;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\r\n      <DialogContent className=\"sm:max-w-[500px]\">\r\n        <DialogHeader>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-yellow-100\">\r\n              <AlertTriangle className=\"h-5 w-5 text-yellow-600\" />\r\n            </div>\r\n            <DialogTitle className=\"text-xl\">EMR Configuration Required</DialogTitle>\r\n          </div>\r\n          <DialogDescription className=\"pt-4 text-base\">\r\n            {error.message}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4 py-4\">\r\n          <div className=\"rounded-lg border border-yellow-200 bg-yellow-50 p-4\">\r\n            <h4 className=\"font-medium text-yellow-900 mb-2\">What you need to do:</h4>\r\n            <ol className=\"list-decimal list-inside space-y-1 text-sm text-yellow-800\">\r\n              <li>Complete the EMR connection setup for {error.connection_name || 'your EMR'}</li>\r\n              <li>Verify your credentials are properly saved</li>\r\n              <li>Test the connection to ensure it works</li>\r\n            </ol>\r\n          </div>\r\n\r\n          <div className=\"rounded-lg border border-red-200 bg-red-50 p-4\">\r\n            <p className=\"text-sm text-red-800\">\r\n              <strong>Note:</strong> This issue typically occurs when an administrator manually activates\r\n              an EMR connection without completing the credential setup. Please contact your administrator\r\n              or complete the setup process.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter className=\"gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={handleDismiss}\r\n          >\r\n            Dismiss\r\n          </Button>\r\n          <Button\r\n            onClick={handleGoToSettings}\r\n            className=\"bg-blue-600 hover:bg-blue-700\"\r\n          >\r\n            Go to EMR Settings\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAQA;AACA;AACA;AAdA;;;;;;;;AA8BO,SAAS;IACd,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAwB;IAC1D,MAAM,oBAAoB,IAAA,kJAAoB,EAAC,CAAC,QAAU,MAAM,iBAAiB;IAEjF,IAAA,kNAAS,EAAC;QACR,+DAA+D;QAC/D,MAAM,cAAc,eAAe,OAAO,CAAC;QAC3C,IAAI,aAAa;YACf,IAAI;gBACF,MAAM,YAAY,KAAK,KAAK,CAAC;gBAC7B,SAAS;gBACT,UAAU;gBACV,uDAAuD;gBACvD;YACF,EAAE,OAAM;YACN,uBAAuB;YACzB;QACF;QAEA,sCAAsC;QACtC,MAAM,iBAAiB,CAAC;YACtB,MAAM,cAAc;YACpB,MAAM,YAAY,YAAY,MAAM;YAEpC,SAAS;gBACP,SAAS,UAAU,OAAO,IAAI;gBAC9B,cAAc,UAAU,YAAY,IAAI;gBACxC,iBAAiB,UAAU,eAAe;YAC5C;YACA,UAAU;YAEV,2EAA2E;YAC3E;QACF;QAEA,OAAO,gBAAgB,CAAC,2BAA2B;QAEnD,OAAO;YACL,OAAO,mBAAmB,CAAC,2BAA2B;QACxD;IACF,GAAG;QAAC;KAAkB;IAEtB,MAAM,qBAAqB;QACzB,qBAAqB;QACrB,eAAe,UAAU,CAAC;QAC1B,UAAU;QAEV,gCAAgC;QAChC,IAAI,OAAO,cAAc;YACvB,OAAO,IAAI,CAAC,MAAM,YAAY;QAChC;IACF;IAEA,MAAM,gBAAgB;QACpB,qBAAqB;QACrB,eAAe,UAAU,CAAC;QAC1B,UAAU;IACZ;IAEA,IAAI,CAAC,OAAO,OAAO;IAEnB,qBACE,8OAAC,qIAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,4IAAa;YAAC,WAAU;;8BACvB,8OAAC,2IAAY;;sCACX,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,yOAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,8OAAC,0IAAW;oCAAC,WAAU;8CAAU;;;;;;;;;;;;sCAEnC,8OAAC,gJAAiB;4BAAC,WAAU;sCAC1B,MAAM,OAAO;;;;;;;;;;;;8BAIlB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;;gDAAG;gDAAuC,MAAM,eAAe,IAAI;;;;;;;sDACpE,8OAAC;sDAAG;;;;;;sDACJ,8OAAC;sDAAG;;;;;;;;;;;;;;;;;;sCAIR,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAc;;;;;;;;;;;;;;;;;;8BAO5B,8OAAC,2IAAY;oBAAC,WAAU;;sCACtB,8OAAC,qIAAM;4BACL,SAAQ;4BACR,SAAS;sCACV;;;;;;sCAGD,8OAAC,qIAAM;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 994, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/write-great-notes-web/app/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport \"./globals.css\";\r\nimport { ThemeProvider } from \"@/components/theme-provider\";\r\nimport { Toaster } from \"sonner\";\r\nimport { SWRConfig } from \"swr\";\r\nimport { swrConfig } from \"@/lib/swr-config\";\r\nimport { EMRConfigErrorModal } from \"@/components/EMRConfigErrorModal\";\r\n\r\nexport default function RootLayout({\r\n  children,\r\n}: Readonly<{\r\n  children: React.ReactNode;\r\n}>) {\r\n  return (\r\n    <html lang=\"en\" suppressHydrationWarning>\r\n      <head>\r\n        <title key=\"title\">Write Great Notes</title>\r\n        <meta key=\"description\" name=\"description\" content=\"Clinical note generation for healthcare providers\" />\r\n        <link key=\"icon\" rel=\"icon\" href=\"/icon.png\" />\r\n        <link key=\"apple-icon\" rel=\"apple-touch-icon\" href=\"/apple-icon.png\" />\r\n      </head>\r\n      <body>\r\n        <SWRConfig value={swrConfig}>\r\n          <ThemeProvider\r\n            attribute=\"class\"\r\n            defaultTheme=\"system\"\r\n            enableSystem\r\n            disableTransitionOnChange\r\n          >\r\n            <React.Fragment key=\"app-content\">\r\n              {children}\r\n            </React.Fragment>\r\n            <Toaster key=\"toaster\" richColors position=\"top-right\" />\r\n            <EMRConfigErrorModal key=\"emr-error-modal\" />\r\n          </ThemeProvider>\r\n        </SWRConfig>\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUe,SAAS,WAAW,EACjC,QAAQ,EAGR;IACA,qBACE,8OAAC;QAAK,MAAK;QAAK,wBAAwB;;0BACtC,8OAAC;;kCACC,8OAAC;kCAAkB;uBAAR;;;;;kCACX,8OAAC;wBAAuB,MAAK;wBAAc,SAAQ;uBAAzC;;;;;kCACV,8OAAC;wBAAgB,KAAI;wBAAO,MAAK;uBAAvB;;;;;kCACV,8OAAC;wBAAsB,KAAI;wBAAmB,MAAK;uBAAzC;;;;;;;;;;;0BAEZ,8OAAC;0BACC,cAAA,8OAAC,2KAAS;oBAAC,OAAO,iIAAS;8BACzB,cAAA,8OAAC,iJAAa;wBACZ,WAAU;wBACV,cAAa;wBACb,YAAY;wBACZ,yBAAyB;;0CAEzB,8OAAC,gNAAK,CAAC,QAAQ;0CACZ;+BADiB;;;;;0CAGpB,8OAAC,mJAAO;gCAAe,UAAU;gCAAC,UAAS;+BAA9B;;;;;0CACb,8OAAC,yJAAmB,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrC","debugId":null}}]
}